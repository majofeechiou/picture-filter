!function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){t.exports=i(1)},function(t,e,i){"use strict";i(2)},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();!function(t){var e=function(){function e(t,n){i(this,e),this.WEAK_MAP=new WeakMap,this.initConst=function(t){var e={};return this.WEAK_MAP.set(t,e),e},this.getConst=function(t){return this.WEAK_MAP.get(t)},this.addConst=function(t,e,i){var n=this.WEAK_MAP||{};return n[e]=i,this.WEAK_MAP.set(t,n),n},this.defaultAction(t,n)}return n(e,[{key:"setNowCreaterIndex",value:function(t){this.now_creator_index=t}},{key:"setImageOriginData",value:function(t){this.image_origin_data=t}},{key:"getNowCreaterIndex",value:function(){return this.now_creator}},{key:"getNowCreater",value:function(){return _creator[this.getNowCreaterIndex()]}},{key:"getMainSection",value:function(){return this.getConst(this).MAIN_SECTION}},{key:"getObjCanvasPreview",value:function(){return this.getConst(this).OBJ_CANVAS_PREVIEW}},{key:"getPreviewSize",value:function(){return this.getConst(this).PREVIEW_SIZE}},{key:"getObjUpload",value:function(){return this.getConst(this).OBJ_UPLOAD}},{key:"makeTempate",value:function(){var t=document.createElement("input");t.type="file";var e=this.getPreviewSize(),i=document.createElement("canvas");i.setAttribute("data-obj","preview"),i.width=e.width,i.height=e.height;var n=this.getMainSection();void 0!==n&&(this.addConst(this,"OBJ_UPLOAD",t),this.addConst(this,"OBJ_CANVAS",i),n.appendChild(t),n.appendChild(i),this.addConst(this,"OBJ_CANVAS_PREVIEW",n.querySelectorAll('[data-obj="preview"]')[0]))}},{key:"defaultAction",value:function(t,e){this.initConst(this),e=e||{},e.width=e.width>0?e.width:600,e.height=e.height>0?e.height:450,t.nodeType>=1&&(this.addConst(this,"MAIN_SECTION",t),this.addConst(this,"PREVIEW_SIZE",e),this.makeTempate())}},{key:"drawImageCover",value:function(t,e,i,n,r,a,o,s){2===arguments.length&&(i=n=0,r=t.canvas.width,a=t.canvas.height),o="number"==typeof o?o:.5,s="number"==typeof s?s:.5,0>o&&(o=0),0>s&&(s=0),o>1&&(o=1),s>1&&(s=1);var u=e.width,h=e.height,c=Math.min(r/u,a/h),d=u*c,v=h*c,l=void 0,g=void 0,f=void 0,w=void 0,C=1;r>d&&(C=r/d),a>v&&(C=a/v),d*=C,v*=C,f=u/(d/r),w=h/(v/a),l=(u-f)*o,g=(h-w)*s,0>l&&(l=0),0>g&&(g=0),f>u&&(f=u),w>h&&(w=h),t.drawImage(e,l,g,f,w,i,n,r,a)}},{key:"create",value:function(){var e=this;this.getObjUpload().onchange=function(i){var n=t.URL||t.webkitURL,r=n.createObjectURL(this.files[0]);e.setImageOriginData(r);var a=(e.getMainSection(),e.getObjCanvasPreview()),o=a.getContext("2d");a.style.border="1px solid #f00";var s=new Image;s.onload=function(){e.drawImageCover(o,s,0,0,e.getPreviewSize().width,e.getPreviewSize().height)},s.src=r,s.crossOrigin=null}}}]),e}();t.Pfilter=e;var r=document.querySelectorAll('[data-majo="picture-filter"]'),a=new e(r[0]),o=new e(r[1],{width:450,height:100});a.create(),o.create()}(window)}]);